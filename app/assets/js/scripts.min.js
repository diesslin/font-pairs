/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2017. MIT licensed.
 */
"use strict";function process(){fetchJSONFile("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyCQqdSotGRoFU331DHXZkt33jFFcB0XrdY",function(t){var e=t,n=[],o=[],a=[];n.push("Select Font Category","All Fonts");for(var i=0;i<e.items.length;i++){var s=e.items[i];"-1"==n.indexOf(s.category)&&n.push(s.category);for(var l=0;l<s.variants.length;l++)"-1"==a.indexOf(s.variants[l])&&a.push(s.variants[l]);o.push(s.family)}loadFontFiles(["Vollkorn","Lato"]),initForm("font-form","form"),createDropDown(n,"category-list","select",!1,"family-list"),createFontDropDown(e,"family-list","select","variants-list"),createDropDown(a,"variants-list","select",!0,!1),generalInput("lorem-input","text-area","Enter Some Text Here","textarea"),addButton("remove-font","action-button","font-form","remove","results"),addButton("add-font","action-button","font-form","add"),targetDiv("results","results",""),loadFont(),populateFont(fontsAdded)})}function fetchJSONFile(t,e){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=JSON.parse(n.responseText);e&&e(t)}},n.open("GET",t),n.send()}function initForm(t,e){var n=document.createElement("form");n.id=t,n.className=e,document.body.appendChild(n)}function createDropDown(t,e,n,o,a){for(var i=[],s=0;s<t.length;s++)i.push("<option>"+t[s]+"</option>");selectList(e,t,n,!1),o&&(document.getElementById(e).disabled=o),onChangeInit(e,a),setFont(e,targets)}function createFontDropDown(t,e,n,o){selectList(e,t,n,!0),document.getElementById(e).disabled=!0,onChangeInit(e,o),setFont(e,targets)}function selectList(t,e,n,o){a=document.createElement("select"),a.id=t,a.className=n,document.getElementById("font-form").appendChild(a);var a=document.getElementById(t);if(o)e.items.forEach(function(t){var e=new Option(t.family,t.category);a.options[a.options.length]=e,e.dataset.name=t.family,e.dataset.variants=t.variants});else for(var i in e)a.options[a.options.length]=new Option(e[i],e[i])}function onChangeInit(t,e){var n="#"+t;document.querySelector(n).addEventListener("change",function(){var t=this.value,n=document.getElementById(e),o=n.options,a=this.options[this.selectedIndex].getAttribute("data-variants"),i=this.options[this.selectedIndex].getAttribute("data-name");if(n.disabled=!0,o){for(var s=0;s<o.length;s++)switch(o[s].disabled=!0,o[s].hidden=!0,o[s].style.display="none",o[s].style.fontSize=0,o[s].style.fontFamily=o[s].getAttribute("data-name"),t){case"All Fonts":o[s].disabled=!1,o[s].style.display="block",o[s].style.fontSize="100%",loadFontFiles(o[s].style.fontFamily);break;case o[s].value:o[s].disabled=!1,o[s].style.display="block",o[s].style.fontSize="100%",loadFontFiles(o[s].style.fontFamily)}if(a){var l=a.split(",");n.disabled=!1;for(var s=0;s<o.length;s++)if(l.indexOf(o[s].value)>-1){var d=o[s].value,r=!1;d.indexOf("italic")>-1?(d=d.replace("italic",""),r=!0,o[s].style.fontWeight=d,o[s].style.fontStyle="italic"):o[s].style.fontWeight=d,o[s].disabled=!1,o[s].style.display="block",o[s].style.fontSize="100%",loadFontFiles(i+":"+d)}}}n.disabled=!1})}function generalInput(t,e,n,o,a){var i=document.createElement(o);i.id=t,i.className=e,i.value=n,document.getElementById("font-form").appendChild(i),a&&document.getElementById(t).addEventListener("keydown",function(t,e){value=document.getElementById("lorem-input").value,document.getElementById("target-text").innerHTML=value})}function addButton(t,e,n,o,a){var i=document.createElement("input");i.id=t,i.className=e,i.type="button",i.value="add"==o?"+":"-",document.getElementById(n).appendChild(i),"add"==o?addFontFunction(t):"remove"==o&&removeFonts(t,a)}function targetDiv(t,e,n){var o=document.createElement("div");o.id=t,o.className=e,o.innerHTML=n,document.body.appendChild(o)}function loadFontFiles(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)if(1!=isInArray(t[e],loadedFonts)){loadedFonts.push(t[e]);var n=document.getElementsByTagName("head")[0],o=document.createElement("link"),a=t[e].replace(/\s+/g,"+").replace(/'/g,"").replace(/"/g,"");switch(o.type="text/css",o.rel="stylesheet",a){case"Buda":o.href=String("http://fonts.googleapis.com/css?family="+a+":300");break;case"Coda+Caption":o.href=String("http://fonts.googleapis.com/css?family="+a+":800");break;case"Molle":o.href=String("http://fonts.googleapis.com/css?family="+a+":400italic");break;case"Open+Sans+Condensed":o.href=String("http://fonts.googleapis.com/css?family="+a+":300");break;case"UnifrakturCook":o.href=String("http://fonts.googleapis.com/css?family="+a+":700");break;case"":o.href=String("http://fonts.googleapis.com/css?family=Exo+2");break;default:o.href=String("http://fonts.googleapis.com/css?family="+a)}o.media="screen",n.appendChild(o)}}function isInArray(t,e){return e.indexOf(t)>-1}function setFont(t,e){document.getElementById(t).addEventListener("change",function(){if("family-list"==t){var n=this.options[this.selectedIndex].getAttribute("data-name");this.style.fontFamily=n;for(var o=0;o<e.length;o++){var a=document.getElementById(e[o]);a.style.fontFamily=n,a.setAttribute("data-name",n)}}else if("variants-list"==t){var n=this.value;if(n.indexOf("italic")>-1){var i=n.replace("italic",""),s=!0;this.style.fontStyle="italic"}else{var i=n,s=!1;this.style.fontStyle="normal"}this.style.fontWeight=i;for(var o=0;o<e.length;o++){var a=document.getElementById(e[o]);a.style.fontWeight=i,a.setAttribute("data-variants",i),s?(a.style.fontStyle="italic",a.setAttribute("data-italic","italic")):(a.style.fontStyle="normal",a.setAttribute("data-italic",""))}}})}function addFontFunction(t){var e=document.getElementById(t);e.onclick=function(){var t=document.getElementById("lorem-input"),e=t.value.replace(/\n/g,"<br/>"),n=t.getAttribute("data-name"),o=t.getAttribute("data-variants"),a=t.getAttribute("data-italic"),i=document.getElementById("font-size"),s=document.getElementById("line-height");return saveFontLocally(e,n,o,a,i,s),!1}}function loadFont(){if(fontsExist){fontsAdded=JSON.parse(localStorage.getItem("session")),localStorage.setItem("session",JSON.stringify(fontsAdded));for(var t=0;t<fontsAdded.length;t++)fontsAdded[t].fontName&&(fontsAdded[t].variants?fontsAdded[t].variants&&loadFontFiles(fontsAdded[t].fontName+":"+fontsAdded[t].variants):loadFontFiles(fontsAdded[t].fontName))}else fontsAdded=[]}function loadTimer(t,e){console.log(t),console.log(e);setInterval("lazyLoadFonts( fontObject, fontsAdded )",500)}function saveFontLocally(t,e,n,o,a,i){var s={};s.value=t,s.fontName=e,s.fontVariants=n,s.italics=o,s.fontSize=a,s.lineHeight=i,fontsAdded.push(s),localStorage.setItem("session",JSON.stringify(fontsAdded)),populateFont(fontsAdded)}function populateFont(t){var e=document.getElementById("results");e.innerHTML="";for(var n=0;n<t.length;n++)if(t){var o=document.createElement("p"),a=document.createElement("input");o.id=n,o.className="added-font",o.innerHTML=t[n].value,o.style.fontSize=t[n].fontSize,o.style.lineHeight=t[n].lineHeight,o.style.fontFamily=t[n].fontName,o.style.fontWeight=t[n].fontVariants,o.style.fontStyle=t[n].italics,a.type="button",a.className="remove-font",a.value="-",a.dataset.remove=n,void 0!=e.childNodes[0]?e.insertBefore(o,e.childNodes[0]):e.appendChild(o),document.getElementById(n).appendChild(a)}removeFontButton()}function removeFontButton(){for(var t=document.getElementsByClassName("remove-font"),e=0;e<t.length;e++){var n=t[e];n.addEventListener("click",function(){removeThis(this,this.getAttribute("data-remove"))})}}function removeThis(t,e){t.parentNode.parentNode.removeChild(t.parentNode),fontsAdded.length&&(fontsAdded.splice(e,1),localStorage.setItem("session",JSON.stringify(fontsAdded)))}function removeFonts(t,e){var n=document.getElementById(t);n.onclick=function(){document.getElementById(e).innerHTML="",fontsAdded=[],window.localStorage.clear()}}document.addEventListener("DOMContentLoaded",function(){process()});var targets=["lorem-input","variants-list"],loadedFonts=[],fontsAdded=[],fontsExist=JSON.parse(localStorage.getItem("session"));